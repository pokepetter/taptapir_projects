<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <!-- <link rel="manifest" href="/manifest.json"> -->

    <!-- <title>snootboop.js</title> -->
</head>
<style>
    text {
        text-align: center;
        pointer-events: none;
    }
    .entity {
        touch-action: none;
        width:100%; height:100%; position:absolute; top:50%; left:50%; will-change: transform;
        transform:translate(-50%, -50%); color:black; background-size: 100% 100%; padding:0; border-width:0px;
        visibility: 'visible'; font-size:1v; display:inherit; image-rendering: pixelated;
        background-color: 'red';
        background-repeat:repeat;
        /* font-size: 5vh; */
        /* border-radius: 128px; border-style:solid; border-color: white; */
    }
    .entity:focus {
        outline: 0; -moz-outline-style: none;
    }

    .game {margin:auto; background-color: darkgreen; position: absolute; top: 50%; left: 50%;
        transform: translate(-50%, -50%); overflow: hidden; pointer-events: none; font-size:1vh;
        width:100%; height:100%; outline: 0; box-shadow: 0; touch-action: none;
    }
    fullscreen_button {padding: 4px 4px; width: 64px; height: 64px; background-color: #555; border-radius: .2em; border-width: 0px;
        text-decoration: none; color: white; font-size: 50.0px; z-index: 1; position: absolute; text-align: center; right: 0%;
    }

</style>

<body style="margin: 0; background-color:'#111'">
    <div id="game" class="game">
        <div id="loading_text" style="position: absolute; top: 50%; left: 50%; width: 100%; color: white; font-family:monospace;
            transform: translate(-50%, -5%); text-align: center;">

        loading...<br><br><br><br><br><br><br>
        powered by taptapir
        </div>
    </div>

</body>

<script src="taptapir.js"></script>


<script type='text/pokescript'>

ASSETS_FOLDER = 'assets/'


symbols = ['‚òÄÔ∏è','üåô','üåü','ü™ê','üå†']
sample_names = ['UoIowaPiano_n24.wav','UoIowaPiano_n36.wav','UoIowaPiano_n48.wav','UoIowaPiano_n60.wav','UoIowaPiano_n72.wav']
for e in sample_names:
    var audio = new Audio(e)


set_window_color('rgb(49 72 60)')

for y in range(5):
    for x in range(7):
        let b = Button(x=-.5 + (x*1/7), y=-.5+(y*1/7), scale=1/7,  origin=[-.5,.5], color=rgb(x/3,x/7,y/7), octave=y)
        b.text_size = 3
        n = 12 + y*12 + [2,3,5,7,9,10,12][x]
        b.text = n
        b.text_color = 'white'
        // b.text_size = 2
        // b.text = symbols[y]
        b.original_color = b.color
        b.roundness=.5
        b.el.style.boxShadow = "10px 20px 30px rgb(19 12 10)"
        b.el.style.textAlign =  'center'

        b.on_click = def():
            b.color = 'gold'
            invoke(def reset():
                b.color = b.original_color
            , .1)

            var audio = new Audio(sample_names[b.octave])

            audio.volume = .5
            audio.mozPreservesPitch = false
            audio.preservesPitch = false
            n = 12 + y*12 + [2,3,5,7,9,10,12][x]
            audio.playbackRate = 2 ** ((n - (24 + 12*b.octave)) / 12)
            b.text = n
            b.text_color = 'white'

            audio.play()

</script>
<script src="pokescript_compiler.js"></script>




</html>
