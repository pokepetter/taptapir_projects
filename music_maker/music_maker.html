<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <!-- <link rel="manifest" href="/manifest.json"> -->

    <!-- <title>snootboop.js</title> -->
    <link rel="stylesheet" href="../taptapir.css">
</head>

<body>
    <div id="game">
        <div id="loading_text">
        loading...<br><br><br><br><br><br><br>
        powered by taptapir
        </div>
    </div>

</body>

<script src="../taptapir.js"></script>


<script type='text/pokescript'>

ASSETS_FOLDER = 'assets/'


symbols = ['‚òÄÔ∏è','üåô','üåü','ü™ê','üå†']
sample_names = ['UoIowaPiano_n24.wav','UoIowaPiano_n36.wav','UoIowaPiano_n48.wav','UoIowaPiano_n60.wav','UoIowaPiano_n72.wav']
for e in sample_names:
    var audio = new Audio(e)


set_window_color('rgb(49 72 60)')

text = Entity(text='music', text_size=7, color='#00000000', text_color='white')


for y in range(5):
    for x in range(7):
        let b = Button(x=-.5 + (x*1/7), y=-.5+(y*1/7), scale=1/7,  origin=[-.5,.5], color=rgb(x/3,x/7,y/7), octave=y)
        b.text_size = 2
        n = 12 + y*12 + [2,3,5,7,9,10,12][x]
        b.text = n
        b.text_color = 'white'
        // b.text_size = 2
        // b.text = symbols[y]
        b.original_color = b.color
        b.roundness=.5
        b.el.style.boxShadow = "10px 20px 30px rgb(19 12 10)"
        b.el.style.textAlign =  'center'

        b.on_click = def():
            b.color = 'gold'
            invoke(def reset():
                b.color = b.original_color
            , .1)

            var audio = new Audio(sample_names[b.octave])

            audio.volume = .5
            audio.mozPreservesPitch = false
            audio.preservesPitch = false
            n = 12 + y*12 + [2,3,5,7,9,10,12][x]
            audio.playbackRate = 2 ** ((n - (24 + 12*b.octave)) / 12)
            b.text = n
            b.text_color = 'white'

            audio.play()

</script>

<script src="../pokescript_compiler.js"></script>

</html>
