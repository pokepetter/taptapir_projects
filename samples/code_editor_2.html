<html><title>code_editor_2.js</title><body>
<script src="../taptapir/taptapir.js"></script>
<script type='text/sunsnake'>

set_window_color("#21496b")

button_size = .1
button_color = 'smoke'

text = ''
text =  'print(\'hello world!\')\n\n'
text += 'for i in range(10):\n'
text += '    print(i)\n\n'

text += 'player = Button(scale=.25, color=color.azure)\n'
text += 'player.on_click = def():\n'
text += '    print(\'hi :D\')\n'
text += '    player.color = hsv(random_int(0,360),.8,.9)\n'

# text_entity = Text(text=text, z=1, color='#000', text_color='#fff', x=-.475, y=(.5*aspect_ratio)-.05, draggable=True, max_x=-.475, min_y=0, max_y=100, scale=[.9,2], origin=[-.5,.5], text_size=1.9, roundness=.02)
# text_entity.el.style.fontFamily = 'monospace'
# text_entity.el.style.textOverflow = 'clip'
# text_entity = InputField(z=-1, scale=[.9,1], roundness=.05, color=color.black, alpha=.9, text=text, text_color=color.white, padding=1)


# fake_text = Entity(scale=[.95,.95*aspect_ratio], color=hsv(0,0,.05,0), text_size=1.5, text_color=hsv(0,0,.8), roundness=.025, ignore_collision=True, enabled=True)
# text_entity = Entity(scale=[.95,.95*aspect_ratio], color=hsv(0,0,.05), text_size=1.5, text_color=hsv(0,0,.8,1), roundness=.025, shadow=True)
# # fake_text = Entity(scale=[.95,.95*aspect_ratio], alpha=1, text_color=text_entity.text_color, z=-2, color=color.clear, text=text, text_size=text_entity.text_size, roundness=.025)
# fake_text.el.style.textIndent = '.5em'
# fake_text.el.style.fontFamily = 'monospace'
# fake_text.el.style.pointerEvents = 'none'
# fake_text.model.style.pointerEvents = 'none'
#
# text_area = document.createElement('textarea')
# text_entity.model.appendChild(text_area)
# text_area.value = text


# text_entity.text_color = color.green
# text_area.style.padding='.25em'
# text_entity.style.padding='.25em'
text_area = Entity(visible_self=False)

# w = 10
# h = 10
# char_grid = Array_2d(w,h)
# for y in range(h):
#     for x in range(w):
#         char_grid[y][x] = Entity(scale=[.02,.04], text='', roundness=.25, xy=[-.5+.05+(x*.025), y*.04], text_origin=[0,0], color=color.clear, text_size=2)


def render_text(text):
    x = 0
    y = 0
    for char in text:
        if char == '\n':
            y += 1
            x = 0


        char_grid[y][x].text = char
        x += 1
        if x > w:
            y += 1
            x = 0
# render_text(text)

# text_area.style = 'width:100%; height:100%; background-color:#111; font-color:#fff; z-index:2'
# text_area

# text_area.style.textOverflow = 'hidden'
# text_area.style.fontStretch = 'ultra-condensed'
# text_area.style.letterSpacing = -2
# text_entity.text = '123'

# text_entity.fit_to_text()
# text_entity.scale_x = .95
run_button = Button(text='>', scale=.1, origin=[.5,-.5], position=[.5,.5*aspect_ratio])
# run_button.on_click = def():
#     pass
preview_canvas = Entity(name='preview_canvas', parent=camera.ui, scale=[.9,aspect_ratio*.9], y=.05, z=-1, color=color.black, shadow=1, enabled=False)
preview_canvas.entity_parent = None

close_button = Button(scale=[.2,.1], origin=[.5,-.5], position=[.5-.2,-.5*aspect_ratio], text='close', color=color.gray, enabled=False, text_size=2.5)
close_button.on_click = def close():
    if preview_canvas.entity_parent:
        destroy(preview_canvas.entity_parent)
    preview_canvas.enabled = False
    close_button.enabled = False

preview_button = Button(scale=[.2,.075], origin=[.5,-.5], position=bottom_right, text='preview', color=color.azure, text_color=color.white, text_size=2.5)
preview_button.on_click = def preview():
    preview_canvas.enabled = True
    close_button.enabled = True

    text_to_compile = text_entity.text
    _original_scene = scene
    _original_camera_ui = camera.ui

    preview_canvas.entity_parent = Entity(parent=preview_canvas, visible_self=False, scale_y=1/aspect_ratio)
    fake_camera_ui = Entity(parent=preview_canvas.entity_parent, visible_self=False)
    scene = preview_canvas.entity_parent.el
    camera.ui = fake_camera_ui
    result = compile(text_to_compile)
    eval(result)
    scene = _original_scene
    camera.ui = _original_camera_ui

keyboard = Entity(color=color.black, origin=[0,.5], y=-.25, ignore_collision=False)
sunsnake.define(*KeyboardButton(,Button(parent=keyboard, text=e, scale=[(1/11)-.005, h], color=hsv(0,0,.05), text_color=color.gray, text_size=2, )
h = .1

math_symbols_parent = Entity(visible_self=False, parent=keyboard, scale=.9)
for i, e in '+-/*'.split(''):
    *KeyboardButton(parent=math_symbols_parent, x=-(1/15*4/2) + (i/15) + (1/11/2), y=.11+(-h-.01), origin=[0,-.5], scale=1/15, roundness=.25)

for i, e in '0123456789.'.split(''):
    *KeyboardButton(x=-.5 + (i/11) + (1/11/2), y=.05+(-h-.01))
for i, e in 'qwertyuiop`'.split(''):
    *KeyboardButton(x=-.5 + (i/11) + (1/11/2), y=.05+(-h-.01)*2)
for i, e in 'asdfghjkl[]'.split(''):
    *KeyboardButton(x=-.5 + (i/11) + (1/11/2), y=.05+(-h-.01)*3)
for i, e in '<>zxcvbnm,:'.split(''):
    *KeyboardButton(x=-.5 + (i/11) + (1/11/2), y=.05+(-h-.01)*4)
for i, e in '()'.split(''):
    *KeyboardButton(x=-.5 + (i/11) + (1/11/2), y=.05+(-h-.01)*5)
# a = *KeyboardButton(x=-.5 + (0/11) + (1/11/2), y=.05+(-h-.01)*5, text=' ')
underscore = *KeyboardButton(x=-.5 + (2.5/11) + (1/11/2), y=.05+(-h-.01)*5, text='_', scale_x=(1/11*2)-.005)
space = *KeyboardButton(x=-.5 + (5/11) + (1/11/2), y=.05+(-h-.01)*5, text='space', scale_x=(1/11*3)-.005)
dot = *KeyboardButton(x=-.5 + (7.5/11) + (1/11/2), y=.05+(-h-.01)*5, text='.', scale_x=(1/11*2)-.005)
enter = *KeyboardButton(x=-.5 + (9.5/11) + (1/11/2), y=.05+(-h-.01)*5, text='‚èé', scale_x=(1/11*2)-.005)

# for i, e in '1234'.split(''):
#     *KeyboardButton(x=-.5 + ((i+7)/11) + (1/11/2), y=.05+(-h-.01)*5)

</script><script src="../taptapir/sunsnake_compiler.js"></script>
<script type='text/sunsnake'>
